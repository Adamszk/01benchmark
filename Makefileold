all:\
standard-ada\
optimized-ada\
standard-c\
optimized-c\
standard-cpp\
optimized-cpp\
run_test\
clean


standard-ada: adabench.adb
	gnatmake adabench.adb -aI/usr/share/ada/adainclude/plplotada -aL/usr/lib64/ada/adalib/plplotada -cargs -I/usr/include/plplot -largs -lplplotada -lplplot
	
optimized-ada: adabencho3.adb 	
	gnatmake -O3 adabencho3.adb -aI/usr/share/ada/adainclude/plplotada -aL/usr/lib64/ada/adalib/plplotada -cargs -I/usr/include/plplot -largs -lplplotada -lplplot
	
standard-c: cbench.c
	gcc -o cbench cbench.c -lm -lplplot
	
optimized-c: cbencho3.c
	gcc -O3 -o cbencho3 cbencho3.c -lm -lplplot	
	
standard-cpp: cbench.c
	gcc -o cbench cbench.c -lm -lplplot
	
optimized-cpp: cbencho3.c
	gcc -O3 -o cbencho3 cbencho3.c -lm -lplplot	


clean:
	rm -f adabench adabench.ali
	rm -f *.o 
	rm -f adabencho3 adabencho3.ali
	rm -f *.o 
	rm -f cbench 
	rm -f *.o 
	rm -f cbencho3 
	rm -f *.o 

run_test: all
	echo "" > output_file.txt
	time -ao output_file.txt -f "Ada: %E" ./adabench 
	time -ao output_file.txt -f "C: %E" ./cbench 
	time -ao output_file.txt -f "Ada Optimized: %E" ./adabencho3
	time -ao output_file.txt -f "C Optimized: %E" ./cbencho3
	echo "" > codesize.txt
	stat -c %s "adabench" --printf='Ada: %s\n' >> codesize.txt
	stat -c %s "cbench" --printf='C: %s\n' >> codesize.txt
	stat -c %s "adabencho3" --printf='Adao3: %s\n' >> codesize.txt
	stat -c %s "cbencho3" --printf='Co3: %s\n' >> codesize.txt
	
